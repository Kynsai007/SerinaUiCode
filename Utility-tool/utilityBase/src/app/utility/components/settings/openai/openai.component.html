<div>
    <h6>Global Level</h6>
    <div class="main_div" *ngIf="!testingMode">
        <div class="d-flex justify-content-between">
            <div><input type="text" class="form-control f-12" (keyup)="searchGlobalTags($event.target.value)" placeholder="Search By Tag Name..."></div>
            <div class="d-flex f-12 justify-content-between">
                <div class="mr-3">Edit Tail Prompt </div>
                <div class="mr-3"> Vendor        <span class="slider_span">
                    <label class="switch">
                      <input
                        type="checkbox"
                      />
                      <span class="slider round"></span>
                    </label>
                  </span>Service provider</div>
                <div class="mr-3"> line        <span class="slider_span">
                    <label class="switch">
                      <input
                        type="checkbox"
                      />
                      <span class="slider round"></span>
                    </label>
                  </span>header</div>
                <div><Button class="primaryButton f-12" (click)="openFilterDialog($event)">+ Add More Tags</Button></div>
            </div>
        </div>
        <div class="tableDiv">
            <table class="table f-12 table-striped">
                <thead>
                    <tr>
                        <th>Tag Name</th>
                        <th>Description</th>
                        <th>Is Mandatory</th>
                        <th>Is Active</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let tag of tags">
                        <td>{{tag.name}}</td>
                        <td>{{tag.description}}</td>
                        <td><input type="checkbox"  [name]="tag.name" [id]="tag.name" [checked]="tag.isMandatory" (change)="checkTag($event.target.checked,tag.name)"></td>
                        <td><input type="checkbox"  [name]="tag.name" [id]="tag.name" [checked]="tag.isActive" (change)="checkTag($event.target.checked,tag.name)"></td>
                        <td><Button class="del_btn"><i class="fa fa-trash-o"></i></Button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="d-flex justify-content-end mt-3">
            <button class="primaryButton f-12" (click)="testingMode = true">Test Now</button>
        </div>
    </div>
    <div *ngIf="testingMode" class="d-flex justify-content-between">
        <div class="disaply_div">
          <div *ngIf="isLoaded || isImgBoolean" class="d-flex pdf_btns">
            <div class="zoom mr-3">
              <span class="zoom-in" (click)="zoomIn()"
                ><i class="fa fa-search-plus" aria-hidden="true"></i
              ></span>
              <span class="zoom-out" (click)="zoomOut()"
                ><i class="fa fa-search-minus" aria-hidden="true"></i
              ></span>
            </div>
            <div class="pos-r navigatn" *ngIf="!isImgBoolean">
              <button (click)="prevPage()" [disabled]="page === 1" class="preBtn">
                <i class="fa fa-chevron-left" aria-hidden="true"></i>
              </button>
              <span class="totalPages">{{ page }} / {{ totalPages }}</span>
              <button
                (click)="nextPage()"
                [disabled]="page === totalPages"
                class="preBtn"
              >
                <i class="fa fa-chevron-right" aria-hidden="true"></i>
              </button>
            </div>
      
            <div class="d-flex ml-3 mr-3" *ngIf="!isImgBoolean">
              <button class="preBtn" style="border-right: 1p solid lightgray;" (click)="rotate(-90)">
                <i class="fa fa-undo" aria-hidden="true"></i>
              </button>
              <button class="preBtn mr-1" (click)="rotate(90)">
                <i class="fa fa-repeat" aria-hidden="true"></i>
              </button>
            </div>
      
          </div>
            <section class="maxPage">
                <div *ngIf="isImgBoolean" class="canvasConatiner_height">
                  <div id="parentDiv" class="docContainer">
                    <canvas #canvas id="canvas1" ></canvas>
                  </div>
                </div>
                <div *ngIf="!isImgBoolean" style="position: relative" class="docContaner">
                <!-- <pdf-viewer
                    #pdfviewer
                    [src]="showInvoice"
                    style="width: 100%; overflow: auto"
                    [show-all]="true"
                    [zoom]="zoomdata"
                    [original-size]="false"
                    [fit-to-page]="true"
                    [page]="page"
                    [rotation]="rotation"
                    [render-text]="true"
                    [render-text-mode]="2"
                    (after-load-complete)="afterLoadComplete($event)"
                >
                </pdf-viewer> -->
                  <!-- <pdf-viewer
                    #pdfviewer
                    [src]="showInvoice"
                    style="width: 100%; overflow: auto"
                    [show-all]="true"
                    [zoom]="zoomdata"
                    [original-size]="false"
                    [fit-to-page]="true"
                    [page]="page"
                    [rotation]="rotation"
                    [render-text]="true"
                    [render-text-mode]="2"
                    (after-load-complete)="afterLoadComplete($event)"
                  >
                  </pdf-viewer> -->
                </div>
              </section>
              <!-- <img [src]="imageUrl" style="width: 100%;height: 80vh;"><br/> -->

        </div>
        <div class="upload_div">
            <div>
                <div class="drag-drop-container" 
                  (drop)="onDrop($event)" 
                  (dragover)="onDragOver($event)" 
                  (dragleave)="onDragLeave($event)" 
                  [class.highlight]="isDragOver">
                    <div> <i class="fa fa-upload" aria-hidden="true"></i></div>
                    <p class="f-13 mb-2">Drag & Drop your files here  <br> <span style="font-weight: 400;">OR</span> <br></p>
                    <button class="primaryButton f-12 browse-button" (click)="fileInput.click()">Browse Files</button>
                    <input type="file" id="file" name="file" accept=".pdf, .jpeg,.jpg,.png" multiple (change)="onFileChange($event)" #fileInput style="display: none;"> <br>
                    <button class="primaryButton mt-2 f-12 browse-button">Test Modal</button> <br>
                </div>
            </div>
        </div>
    </div>
</div>

<dialog #tagDialog class="dialog"> 
    <div class="inp_div">
        <input type="text" class="form-control" name="tag_name" id="tag_name" placeholder="Search By Tag Name" (keyup)="searchTags($event.target.value)">
    </div>
    <ul class="tagList">
        <li *ngFor="let item of dialogList" class="f-12">
            <label class="m-0" [for]="item.name">
                <input type="checkbox"  [name]="item.name" [id]="item.name" [checked]="item.isActive" (change)="checkTag($event.target.checked,item.name)"> <span class="tag">{{item.name}}</span>
            </label>
        </li>
    </ul>
    <footer class="d-flex justify-content-end mt-2">
        <button class="secondaryButton f-12 mr-3" (click)="closeDialog()">Close</button>
        <button class="primaryButton f-12" (click)="saveTags()">Save</button>
    </footer>
</dialog>